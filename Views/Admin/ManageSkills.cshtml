@model IEnumerable<SmartJobRecommender.Models.Skill>

@{
    ViewData["Title"] = "Manage Skills";
}

<div class="max-w-6xl mx-auto p-4 sm:p-6 lg:p-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-6">Manage Core Skills</h1>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- Column 1: Add New Skill -->
        <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md h-fit">
            <h2 class="text-xl font-semibold text-blue-600 mb-4">Add New Skill</h2>
            <form asp-action="CreateSkill" method="post">
                <div class="mb-4">
                    <!-- Note: Since this view receives a collection (IEnumerable<Skill>), we are binding to the name property directly. -->
                    <label for="Name" class="block text-sm font-medium text-gray-700">Skill Name (e.g., Python, AWS, Figma)</label>
                    <input type="text" id="Name" name="Name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required />
                    <!-- This line is for validation feedback on the Name field, and assumes your model has a default constructor or the controller passes an empty model for validation -->
                    <span class="text-red-500 text-sm">@Html.ValidationMessage("Name")</span>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors">Create Skill</button>
            </form>
        </div>

        <!-- Column 2 & 3: Current Skills List -->
        <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Existing Skills (@Model.Count())</h2>

            <div class="flex flex-wrap gap-2 max-h-96 overflow-y-auto p-2 border border-gray-100 rounded-md">
                @if (Model.Any())
                {
                    @foreach (var skill in Model) // <-- This variable 'skill' is a single Skill object
                    {
                        <span class="bg-indigo-100 text-indigo-800 text-sm font-medium px-3 py-1 rounded-full cursor-default hover:bg-indigo-200">
                            @skill.Name  <!-- <-- FIX: Accessing Name property on the single 'skill' object -->
                        </span>
                    }
                }
                else
                {
                    <p class="text-gray-500">No skills added yet. Start by adding one in the column on the left.</p>
                }
            </div>
        </div>
    </div>
</div>